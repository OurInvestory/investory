# ğŸš¨ ì—ëŸ¬ ì½”ë“œ ëª…ì„¸ì„œ (Error Specification)

## 1. ê°œìš”

### 1.1 ì—ëŸ¬ ì‘ë‹µ í˜•ì‹

ëª¨ë“  ì—ëŸ¬ ì‘ë‹µì€ ë‹¤ìŒ í˜•ì‹ì„ ë”°ë¦…ë‹ˆë‹¤:

```json
{
  "success": false,
  "error": {
    "code": "ì—ëŸ¬ì½”ë“œ",
    "message": "ì—ëŸ¬ ë©”ì‹œì§€",
    "details": {}  // ì„ íƒì , ì¶”ê°€ ì •ë³´
  }
}
```

### 1.2 ì—ëŸ¬ ì½”ë“œ ì²´ê³„

```
[ë„ë©”ì¸ ì½”ë“œ][ë²ˆí˜¸]

ì˜ˆ: A001, U002, S001
```

| ë„ë©”ì¸ ì½”ë“œ | ë„ë©”ì¸ | ì„¤ëª… |
|------------|--------|------|
| A | Auth | ì¸ì¦ ê´€ë ¨ ì—ëŸ¬ |
| U | User | ì‚¬ìš©ì ê´€ë ¨ ì—ëŸ¬ |
| S | Stock | ì£¼ì‹ ê´€ë ¨ ì—ëŸ¬ |
| O | Order | ì£¼ë¬¸ ê´€ë ¨ ì—ëŸ¬ |
| P | Portfolio | í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë ¨ ì—ëŸ¬ |
| W | WMTI | WMTI ê´€ë ¨ ì—ëŸ¬ |
| R | Reward | ë¦¬ì›Œë“œ ê´€ë ¨ ì—ëŸ¬ |
| C | Common | ê³µí†µ ì—ëŸ¬ |

---

## 2. ì—ëŸ¬ ì½”ë“œ ìƒì„¸

### 2.1 ì¸ì¦ ì—ëŸ¬ (A)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| A001 | 401 | í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤ | Access Token ë§Œë£Œ | Refresh Tokenìœ¼ë¡œ ê°±ì‹  |
| A002 | 401 | ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤ | ì˜ëª»ëœ JWT í˜•ì‹ | ì¬ë¡œê·¸ì¸ |
| A003 | 401 | ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ | ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ | ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥ |
| A004 | 401 | ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤ | í† í° ë¯¸ì œê³µ | ë¡œê·¸ì¸ í•„ìš” |
| A005 | 403 | ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤ | ê¶Œí•œ ë¶€ì¡± | ê¶Œí•œ í™•ì¸ |
| A006 | 401 | ë¦¬í”„ë ˆì‹œ í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤ | Refresh Token ë§Œë£Œ | ì¬ë¡œê·¸ì¸ í•„ìš” |

### 2.2 ì‚¬ìš©ì ì—ëŸ¬ (U)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| U001 | 409 | ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤ | ì•„ì´ë”” ì¤‘ë³µ | ë‹¤ë¥¸ ì•„ì´ë”” ì‚¬ìš© |
| U002 | 409 | ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤ | ì´ë©”ì¼ ì¤‘ë³µ | ë‹¤ë¥¸ ì´ë©”ì¼ ì‚¬ìš© |
| U003 | 404 | ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì | ì•„ì´ë”” í™•ì¸ |
| U004 | 400 | ì˜ëª»ëœ ì‚¬ìš©ì ì •ë³´ì…ë‹ˆë‹¤ | ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨ | ì…ë ¥ê°’ í™•ì¸ |

### 2.3 ì£¼ì‹ ì—ëŸ¬ (S)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| S001 | 404 | ì¢…ëª©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì¢…ëª© | ì¢…ëª© ì½”ë“œ í™•ì¸ |
| S002 | 400 | ìœ íš¨í•˜ì§€ ì•Šì€ ì‹œì¥ì…ë‹ˆë‹¤ | ì˜ëª»ëœ ì‹œì¥ ì½”ë“œ | ì‹œì¥ ì½”ë“œ í™•ì¸ |
| S003 | 503 | ì‹œì„¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ì‹œì„¸ ì¡°íšŒ ì‹¤íŒ¨ | ì ì‹œ í›„ ì¬ì‹œë„ |

### 2.4 ì£¼ë¬¸ ì—ëŸ¬ (O)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| O001 | 400 | ì”ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤ | ë§¤ìˆ˜ ê¸ˆì•¡ ë¶€ì¡± | ì”ê³  í™•ì¸ |
| O002 | 400 | ë³´ìœ  ìˆ˜ëŸ‰ì´ ë¶€ì¡±í•©ë‹ˆë‹¤ | ë§¤ë„ ìˆ˜ëŸ‰ ì´ˆê³¼ | ë³´ìœ  ìˆ˜ëŸ‰ í™•ì¸ |
| O003 | 400 | ì´ë¯¸ ì²´ê²°ëœ ì£¼ë¬¸ì…ë‹ˆë‹¤ | ì²´ê²° ì£¼ë¬¸ ì·¨ì†Œ ì‹œë„ | ì£¼ë¬¸ ìƒíƒœ í™•ì¸ |
| O004 | 404 | ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì£¼ë¬¸ | ì£¼ë¬¸ ID í™•ì¸ |
| O005 | 400 | ì·¨ì†Œí•  ìˆ˜ ì—†ëŠ” ì£¼ë¬¸ì…ë‹ˆë‹¤ | ì´ë¯¸ ì·¨ì†Œ/ì™„ë£Œëœ ì£¼ë¬¸ | ì£¼ë¬¸ ìƒíƒœ í™•ì¸ |
| O006 | 400 | ì£¼ë¬¸ ìˆ˜ëŸ‰ì€ 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤ | ì˜ëª»ëœ ìˆ˜ëŸ‰ | ìˆ˜ëŸ‰ ìˆ˜ì • |
| O007 | 400 | ì§€ì •ê°€ ì£¼ë¬¸ì—ëŠ” ê°€ê²©ì´ í•„ìš”í•©ë‹ˆë‹¤ | ê°€ê²© ë¯¸ì…ë ¥ | ê°€ê²© ì…ë ¥ |

### 2.5 í¬íŠ¸í´ë¦¬ì˜¤ ì—ëŸ¬ (P)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| P001 | 404 | ë³´ìœ  ì¢…ëª©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ë¯¸ë³´ìœ  ì¢…ëª© | ë³´ìœ  í˜„í™© í™•ì¸ |

### 2.6 WMTI ì—ëŸ¬ (W)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| W001 | 400 | ëª¨ë“  ë¬¸í•­ì— ë‹µë³€í•´ì£¼ì„¸ìš” | ë‹µë³€ ëˆ„ë½ | ëª¨ë“  ë¬¸í•­ ë‹µë³€ |
| W002 | 404 | WMTI ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ë¯¸ì™„ë£Œ í…ŒìŠ¤íŠ¸ | í…ŒìŠ¤íŠ¸ ì§„í–‰ |
| W003 | 400 | ì˜ëª»ëœ ë‹µë³€ í˜•ì‹ì…ë‹ˆë‹¤ | ìœ íš¨í•˜ì§€ ì•Šì€ ë‹µë³€ | ë‹µë³€ í˜•ì‹ í™•ì¸ |

### 2.7 ë¦¬ì›Œë“œ ì—ëŸ¬ (R)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| R001 | 404 | ì—…ì ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—…ì  | ì—…ì  ID í™•ì¸ |
| R002 | 409 | ì´ë¯¸ ë‹¬ì„±í•œ ì—…ì ì…ë‹ˆë‹¤ | ì¤‘ë³µ ë‹¬ì„± ì‹œë„ | - |

### 2.8 ê³µí†µ ì—ëŸ¬ (C)

| ì½”ë“œ | HTTP ìƒíƒœ | ë©”ì‹œì§€ | ì„¤ëª… | ëŒ€ì‘ ë°©ë²• |
|------|----------|--------|------|----------|
| C001 | 400 | ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤ | ìš”ì²­ í˜•ì‹ ì˜¤ë¥˜ | ìš”ì²­ í˜•ì‹ í™•ì¸ |
| C002 | 400 | ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤ | ì…ë ¥ê°’ ì˜¤ë¥˜ | ì…ë ¥ê°’ í™•ì¸ |
| C003 | 500 | ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤ | ì„œë²„ ì—ëŸ¬ | ê´€ë¦¬ì ë¬¸ì˜ |
| C004 | 503 | ì„œë¹„ìŠ¤ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ì„œë¹„ìŠ¤ ì ê²€ | ì ì‹œ í›„ ì¬ì‹œë„ |
| C005 | 409 | ë™ì‹œ ìˆ˜ì • ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤ | ë‚™ê´€ì  ë½ ì¶©ëŒ | ì¬ì‹œë„ |

---

## 3. ìœ íš¨ì„± ê²€ì¦ ì—ëŸ¬

### 3.1 í•„ë“œë³„ ê²€ì¦ ë©”ì‹œì§€

#### íšŒì›ê°€ì…

| í•„ë“œ | ê²€ì¦ ê·œì¹™ | ì—ëŸ¬ ë©”ì‹œì§€ |
|------|----------|------------|
| loginId | í•„ìˆ˜, 4~20ì | ì•„ì´ë””ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤ / ì•„ì´ë””ëŠ” 4~20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤ |
| password | í•„ìˆ˜, 8~20ì | ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤ / ë¹„ë°€ë²ˆí˜¸ëŠ” 8~20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤ |
| email | í•„ìˆ˜, ì´ë©”ì¼ í˜•ì‹ | ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤ / ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤ |
| nickname | í•„ìˆ˜, 2~10ì | ë‹‰ë„¤ì„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤ / ë‹‰ë„¤ì„ì€ 2~10ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤ |

#### ì£¼ë¬¸

| í•„ë“œ | ê²€ì¦ ê·œì¹™ | ì—ëŸ¬ ë©”ì‹œì§€ |
|------|----------|------------|
| stockCode | í•„ìˆ˜ | ì¢…ëª© ì½”ë“œëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤ |
| orderType | í•„ìˆ˜ | ì£¼ë¬¸ ìœ í˜•ì€ í•„ìˆ˜ì…ë‹ˆë‹¤ |
| side | í•„ìˆ˜ | ë§¤ë§¤ êµ¬ë¶„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤ |
| quantity | í•„ìˆ˜, 1 ì´ìƒ | ìˆ˜ëŸ‰ì€ í•„ìˆ˜ì…ë‹ˆë‹¤ / ìˆ˜ëŸ‰ì€ 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤ |

### 3.2 ìœ íš¨ì„± ì—ëŸ¬ ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "success": false,
  "error": {
    "code": "C002",
    "message": "ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
    "details": {
      "loginId": "ì•„ì´ë””ëŠ” 4~20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤",
      "email": "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤"
    }
  }
}
```

---

## 4. HTTP ìƒíƒœ ì½”ë“œ

| ìƒíƒœ ì½”ë“œ | ì˜ë¯¸ | ì‚¬ìš© ìƒí™© |
|----------|------|----------|
| 200 | OK | ìš”ì²­ ì„±ê³µ |
| 201 | Created | ë¦¬ì†ŒìŠ¤ ìƒì„± ì„±ê³µ |
| 400 | Bad Request | ì˜ëª»ëœ ìš”ì²­ (ìœ íš¨ì„± ì˜¤ë¥˜) |
| 401 | Unauthorized | ì¸ì¦ ì‹¤íŒ¨ |
| 403 | Forbidden | ê¶Œí•œ ë¶€ì¡± |
| 404 | Not Found | ë¦¬ì†ŒìŠ¤ ì—†ìŒ |
| 409 | Conflict | ì¶©ëŒ (ì¤‘ë³µ ë“±) |
| 500 | Internal Server Error | ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ |
| 503 | Service Unavailable | ì„œë¹„ìŠ¤ ë¶ˆê°€ |

---

## 5. í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ ì²˜ë¦¬ ê°€ì´ë“œ

### 5.1 ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì‹œ

```typescript
// ì—ëŸ¬ í•¸ë“¤ëŸ¬
const handleApiError = (error: ApiError) => {
  const { code, message } = error;
  
  switch (code) {
    // ì¸ì¦ ì—ëŸ¬
    case 'A001':
      // í† í° ê°±ì‹  ì‹œë„
      return refreshAndRetry();
    case 'A004':
    case 'A006':
      // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
      logout();
      redirect('/login');
      break;
      
    // ì…ë ¥ ì—ëŸ¬
    case 'U001':
    case 'U002':
      // ì¤‘ë³µ ì•ˆë‚´
      showError(message);
      break;
      
    // ì£¼ë¬¸ ì—ëŸ¬
    case 'O001':
    case 'O002':
      showError(message);
      break;
      
    // ë‚™ê´€ì  ë½ ì¶©ëŒ
    case 'C005':
      // ë°ì´í„° ìƒˆë¡œê³ ì¹¨ í›„ ì¬ì‹œë„ ì•ˆë‚´
      showError('ë‹¤ë¥¸ ì‘ì—…ê³¼ ì¶©ëŒí–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      break;
      
    // ì„œë²„ ì—ëŸ¬
    case 'C003':
    default:
      showError('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      break;
  }
};
```

### 5.2 Axios ì¸í„°ì…‰í„°

```typescript
api.interceptors.response.use(
  (response) => response,
  async (error) => {
    const errorData = error.response?.data?.error;
    
    if (errorData) {
      // í† í° ë§Œë£Œ ì‹œ ê°±ì‹  ì‹œë„
      if (errorData.code === 'A001') {
        const refreshed = await tryRefreshToken();
        if (refreshed) {
          return api.request(error.config);
        }
      }
      
      // ê³µí†µ ì—ëŸ¬ ì²˜ë¦¬
      handleApiError(errorData);
    }
    
    return Promise.reject(error);
  }
);
```

---

## 6. ì—ëŸ¬ ë¡œê¹…

### 6.1 ë¡œê¹… ë ˆë²¨

| ì—ëŸ¬ ìœ í˜• | ë¡œê¹… ë ˆë²¨ |
|----------|----------|
| í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ (4xx) | WARN |
| ì„œë²„ ì—ëŸ¬ (5xx) | ERROR |
| ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ | INFO |
| ì˜ˆìƒì¹˜ ëª»í•œ ì˜ˆì™¸ | ERROR + Stack Trace |

### 6.2 ë¡œê·¸ í¬ë§·

```
[TIMESTAMP] [LEVEL] [REQUEST_ID] [ERROR_CODE] [MESSAGE]
[2024-01-15 14:30:00] [WARN] [req-123] [U001] ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤ - loginId: testuser
[2024-01-15 14:31:00] [ERROR] [req-124] [C003] ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ - NullPointerException at OrderService.java:45
```
